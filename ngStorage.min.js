/*! ngStorage 0.3.0 | Copyright (c) 2015 Gias Kay Lee | MIT License */"use strict";!function(){function a(b,c){return["$rootScope","$window","$log","$injector",function(d,e,f,g){for(var h,i,j,k=c?"ngStorage-"+c+"-":"ngStorage-",l=k.length,m=e[b]||(f.warn("This browser does not support Web Storage!"),{}),n={$default:function(a){for(var b in a)angular.isDefined(n[b])||(n[b]=a[b]);return n},$reset:function(a){for(var b in n)"$"===b[0]||delete n[b];return n.$default(a)},$namespace:function(c){return g.invoke(a(b,c))}},o=0;o<m.length;o++)(j=m.key(o))&&k===j.slice(0,l)&&(n[j.slice(l)]=angular.fromJson(m.getItem(j)));return h=angular.copy(n),d.$watch(function(){i||(i=setTimeout(function(){if(i=null,!angular.equals(n,h)){angular.forEach(n,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&m.setItem(k+b,angular.toJson(a)),delete h[b]});for(var a in h)m.removeItem(k+a);h=angular.copy(n)}},100))}),"localStorage"===b&&e.addEventListener&&e.addEventListener("storage",function(a){k===a.key.slice(0,l)&&(a.newValue?n[a.key.slice(l)]=angular.fromJson(a.newValue):delete n[a.key.slice(l)],h=angular.copy(n),d.$apply())}),n}]}angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"))}();